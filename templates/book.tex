\documentclass{book}

% booklet-sized pages
\usepackage[papersize={5.5in, 8.5in}]{geometry}

% for strike-outs
\usepackage{ulem}

% use prettier fonts
\usepackage{fontspec}
\defaultfontfeatures{Mapping=tex-text,Scale=MatchLowercase}
\setmainfont{Crimson}
\setsansfont{Poppins}
\setmonofont{Source Code Pro}

% sans-serif fonts in the headers
\usepackage{sectsty}
\allsectionsfont{\sffamily}

% syntax highlighting
\usepackage{minted}
\usemintedstyle{vs}

% prevent page breaks
% https://tex.stackexchange.com/a/94702
\newenvironment{absolutelynopagebreak}
  {\par\nobreak\vfil\penalty0\vfilneg
   \vtop\bgroup}
  {\par\xdef\tpd{\the\prevdepth}\egroup
   \prevdepth=\tpd}

%\makeatletter
%\renewcommand{\frontmatter}{\cleardoublepage\@mainmatterfalse}
%\renewcommand{\mainmatter}{\cleardoublepage\@mainmattertrue}
%\makeatother

\title{ {{ front.title }} }
\author{ {{ front.author }} }
\date{ {{ front.pubdate|human_date }} }

\begin{document}
\frontmatter

\maketitle

\tableofcontents

\chapter{Preface}

{{ description }}

\mainmatter

{% for chapter in chapters %}
\chapter{ {{ chapter.front.title }} }

{{ chapter.contents }}

{% for section in chapter.sections %}
\chapter{ {{ section.front.title }} }

{{ section.contents }}
{% endfor %}

{% endfor %}

\end{document}
